<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>

<body>

	<a
		href="https://mc6vgk-sxj9p08pqwxqz9hw9-4my.auth.marketingcloudapis.com/v2/authorize?response_type=code&client_id=4b3a1hyqartrnbu0fjw4c7y1&redirect_uri=https://sfmc-slack-app.herokuapp.com/&scope=email_read%20email_write%20email_send&state=mystate">
		Sign In</a>

	<button onclick="getParameters()">
		Get URL parameters
	</button>
</body>
<script>
	function getParameters() {
		let urlString = window.location.href;
		console.log('Current url ' + urlString);
		let paramString = urlString.split('?')[1];
		let authCode;
		let queryString = new URLSearchParams(paramString);

		for (let pair of queryString.entries()) {
			console.log("Key is:" + pair[0]);
			console.log("Value is:" + pair[1]);
			authCode = pair[1];
		}

		var myHeaders = new Headers();
		myHeaders.append("Content-Type", "application/json");
	
		var raw = JSON.stringify({
			"grant_type": "authorization_code",
			"code": authCode,
			"client_id": "4b3a1hyqartrnbu0fjw4c7y1",
			"client_secret": "zRWL2uqxxIsRA9BWU6zdcPes",
			"redirect_uri": "https://sfmc-slack-app.herokuapp.com/",
			"scope": "email_read email_write email_send"
		});

		var requestOptions = {
			method: 'POST',
			headers: myHeaders,
			body: raw,
			redirect: 'follow'
		};

		fetch("https://mc6vgk-sxj9p08pqwxqz9hw9-4my.auth.marketingcloudapis.com/v2/token", requestOptions)
			.then(response => response.text())
			.then(result => console.log(result))
			.catch(error => console.log('error', error));
	}
</script>

</html>